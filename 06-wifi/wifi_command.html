<!DOCTYPE html>
<html>

<head>
  <title>Key Up/Down Listener</title>
  <script>
    const ws = new WebSocket("ws://192.168.4.1:9090");

    ws.onopen = function () {
      console.log("Connected");
    };

    ws.onclose = function () {
      console.log("Closed");
    };

    const isWSConnected = function () {
      return ws && ws.readyState === ws.OPEN;
    };

    // Event listeners
    document.addEventListener("keydown", function (event) {
      console.log("keydown", event);
      keyUpDown[event.key] = true;
    });

    document.addEventListener("keyup", function (event) {
      console.log("keyup", event);
      keyUpDown[event.key] = false;
    });

    const updateDisplay = function () {
      var divs = document.querySelectorAll(".key-state");
      for (var i = 0; i < divs.length; i++) {
        var div = divs[i];
        var span = div.querySelector("span");
        var key = span.id;
        span.innerHTML = keyUpDown[key];
      }
    };

    // Display the key states in HTML
    document.addEventListener("DOMContentLoaded", function () {
      updateDisplay();
    });
  </script>
</head>

<body>
  <div class="key-state">Left: <span id="ArrowLeft"></span></div>
  <div class="key-state">Up: <span id="ArrowUp"></span></div>
  <div class="key-state">Right: <span id="ArrowRight"></span></div>
  <div class="key-state">Down: <span id="ArrowDown"></span></div>
</body>

</html>